"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[723],{973:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(756),d=t(1);class l extends d.N{constructor(e,s,t,a,d){super(a,d),this.publisher=void 0,this.spreadsheet=void 0,this.id=void 0,this.publisher=e,this.spreadsheet=s,this.id=t}async execute(e){const s=this.encodeLoginString(),t=(await a.Pw(this.publisher,this.spreadsheet,0,s)).value.map((e=>e.payload));e.addUpdatesForPublished(this.publisher,this.spreadsheet,t)}}const n=l},584:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(756),d=t(1);class l extends d.N{constructor(e,s,t,a,d,l){super(d,l),this.publisher=void 0,this.spreadsheet=void 0,this.id=void 0,this.payload=void 0,this.publisher=e,this.spreadsheet=s,this.id=t,this.payload=a}async execute(e){const s=this.encodeLoginString();await a.Sz(this.publisher,this.spreadsheet,this.id,this.payload,s);e.addUpdatesForPublished(this.publisher,this.spreadsheet,[this.payload])}}const n=l},723:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(43),d=t(579);const l=e=>{let{updateCurrentUser:s,user:t}=e;return(0,d.jsxs)("div",{className:"dashboard-header",children:[(0,d.jsx)("div",{className:"dashboard-title",children:"AARCS Husksheets Dashboard"}),(0,d.jsxs)("div",{className:"header-right-side",children:[(0,d.jsx)("div",{className:"username",children:t.getUserName()}),(0,d.jsx)("button",{className:"logout-button",onClick:()=>s(null),children:"Logout"})]})]})},n=e=>{let{content:s,handleTogglePopupModal:t}=e;return(0,d.jsx)("div",{className:"modal-backdrop",onClick:()=>t(),children:(0,d.jsx)("div",{className:"modal-body",onClick:e=>e.stopPropagation(),children:s})})},r=e=>{let{handleTogglePopupModal:s,handleCreateSpreadsheet:t,spreadsheetList:l}=e;const[r,i]=(0,a.useState)(""),[h,o]=(0,a.useState)(""),[p,c]=(0,a.useState)(""),[u,g]=(0,a.useState)(""),m=(0,d.jsxs)("div",{className:"create-spreadsheet-popup-content",children:[(0,d.jsx)("h2",{children:"New Spreadsheet"}),(0,d.jsxs)("div",{className:"field-and-input",children:[(0,d.jsx)("p",{children:"Name:"}),(0,d.jsx)("input",{className:"name-input",onChange:e=>i(e.target.value),placeholder:"Name"})]}),(0,d.jsxs)("div",{className:"row-input",children:[(0,d.jsxs)("div",{className:"field-and-input",children:[(0,d.jsx)("p",{children:"Rows:"}),(0,d.jsx)("input",{className:"dimension-input",onChange:e=>o(e.target.value),placeholder:"Rows"})]}),(0,d.jsxs)("div",{className:"field-and-input",children:[(0,d.jsx)("p",{children:"Columns:"}),(0,d.jsx)("input",{className:"dimension-input",onChange:e=>c(e.target.value),placeholder:"Columns"})]}),""!==u?(0,d.jsx)("div",{className:"error",children:u}):(0,d.jsx)(d.Fragment,{})]}),(0,d.jsxs)("div",{className:"buttons",children:[(0,d.jsx)("button",{onClick:()=>s(),children:"Cancel"}),(0,d.jsx)("button",{onClick:()=>{((e,a,d)=>{const n=l.find((s=>s.getSheetName()===e));""!==e?n?g("Spreadsheet name already exists"):(s(),t(e,Number(a),Number(d))):g("Spreadsheet must have a name")})(r,h,p)},children:"Create new spreadsheet"})]})]});return(0,d.jsx)(n,{content:m,handleTogglePopupModal:s})};var i=t(475),h=t(973),o=t(584);const p=e=>{let{controller:s,handleTogglePRPopup:t,PRIndex:l,spreadSheetList:r,user:i}=e;const[p,c]=(0,a.useState)([]),[u,g]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{try{const e=r[l];await s.excecuteRequest(new h.A(i.getUserName(),e.getSheetName(),Number(e.getID()),i.getUserName(),i.getPassword()));const t=s.getModel().getSubscriptionUpdates(i.getUserName(),e.getSheetName());c(t.reverse())}catch(u){g("Error getting subscription updates")}})()}),[r,l,s,i]);const m=(0,d.jsxs)("div",{className:"update-requests-body",children:[(0,d.jsx)("h2",{children:"Pull Requests"}),""!==u?(0,d.jsx)("div",{style:{color:"red"},children:u}):(0,d.jsx)(d.Fragment,{children:0===p.length?(0,d.jsx)("div",{children:"No update requests"}):(0,d.jsx)("div",{className:"update-requests-list",children:p.map(((e,t)=>(0,d.jsxs)("div",{className:"update-request",children:[(0,d.jsx)("button",{className:"approve-button",onClick:()=>(async(e,t)=>{try{const a=e.getSubscriptionUpdates()[t].join("\n");await s.excecuteRequest(new o.A(i.getUserName(),e.getSheetName(),Number(e.getID()),a,i.getUserName(),i.getPassword()))}catch(u){g("Error setting published update")}})(r[l],t),children:"Approve Updates"}),(0,d.jsx)("div",{className:"updates-list",children:e.map(((e,s)=>(0,d.jsx)("div",{className:"update",children:e},s)))})]},t)))})})]});return(0,d.jsx)(n,{content:m,handleTogglePopupModal:()=>t(l)})},c=e=>{let{controller:s,handleChooseSpreadsheet:t,handleDeleteSpreadsheet:a,handleTogglePRPopup:l,loading:n,pRDropdownsOpen:r,spreadSheetList:h,user:o}=e;return(0,d.jsx)("div",{children:n?(0,d.jsx)("div",{children:"Loading"}):(0,d.jsxs)("div",{className:"spreadSheet-list",children:[(0,d.jsx)("div",{className:"spreadSheet-link spreadSheet-list-header my-sheets-header",children:(0,d.jsx)("p",{children:"Name"})}),h.map(((e,n)=>(0,d.jsxs)("div",{className:"link-container",children:[(0,d.jsx)(i.k2,{className:"spreadSheet-link my-sheets-header",onClick:()=>t(e.getSheetName()),to:"/spreadsheet",children:(0,d.jsx)("p",{children:e.getSheetName()})}),(0,d.jsx)("button",{className:"pr-button",onClick:()=>{l(n)},children:(0,d.jsx)("p",{children:"View Update Requests"})}),(0,d.jsx)("button",{className:"delete-button",onClick:()=>a(e.getSheetName()),children:"Delete"}),r[n]&&(0,d.jsx)(p,{controller:s,handleTogglePRPopup:l,PRIndex:n,spreadSheetList:h,user:o})]},n)))]})})},u=e=>{let{handleChooseSpreadsheet:s,loading:t,spreadSheetList:a}=e;return(0,d.jsx)("div",{children:t?(0,d.jsx)("div",{children:"Loading"}):(0,d.jsxs)("div",{className:"spreadSheet-list",children:[(0,d.jsxs)("div",{className:"spreadSheet-link spreadSheet-list-header",children:[(0,d.jsx)("p",{children:"Name"}),(0,d.jsx)("p",{className:"publisher",children:"Publisher"})]}),a.map(((e,t)=>(0,d.jsx)("div",{className:"link-container",children:(0,d.jsxs)(i.k2,{className:"spreadSheet-link",onClick:()=>s(e.getSheetName()),to:"/spreadsheet",children:[(0,d.jsx)("p",{children:e.getSheetName()}),(0,d.jsx)("p",{className:"publisher",children:e.getPublisher()})]})},t)))]})})};class g extends a.Component{constructor(e){super(e),this.state={showMySheetsPage:!0,isPopupModalOpen:!1,pRDropdownsOpen:[]},this.handleTogglePRPopup=this.handleTogglePRPopup.bind(this),this.handleTogglePopupModal=this.handleTogglePopupModal.bind(this),this.handleTogglePage=this.handleTogglePage.bind(this)}componentDidMount(){this.setState({pRDropdownsOpen:new Array(this.props.spreadSheetList.length).fill(!1)})}handleTogglePage(){this.setState((e=>({...e,showMySheetsPage:!e.showMySheetsPage})))}handleTogglePopupModal(){this.setState((e=>({...e,isPopupModalOpen:!e.isPopupModalOpen})))}handleTogglePRPopup(e){this.setState((s=>({...s,pRDropdownsOpen:[...s.pRDropdownsOpen.slice(0,e),!s.pRDropdownsOpen[e],...s.pRDropdownsOpen.slice(e+1)]})))}render(){const{controller:e,handleChooseSpreadsheet:s,handleCreateSpreadsheet:t,handleDeleteSpreadsheet:a,loading:n,spreadSheetList:i,updateCurrentUser:h,user:o}=this.props,{isPopupModalOpen:p,pRDropdownsOpen:g,showMySheetsPage:m}=this.state,x=i.filter((e=>e.getPublisher()===o.getUserName())),N=i.filter((e=>e.getPublisher()!==o.getUserName()));return(0,d.jsxs)("div",{className:"dashboard-page",children:[(0,d.jsx)(l,{updateCurrentUser:h,user:o}),(0,d.jsxs)("div",{className:"dashboard-body",children:[(0,d.jsxs)("div",{className:"top-buttons-row",children:[(0,d.jsxs)("div",{className:"page-tab-buttons",children:[(0,d.jsx)("button",{className:"page-button my-sheet-button ".concat(m?"selected":""),onClick:this.handleTogglePage,disabled:m,children:"My sheets"}),(0,d.jsx)("button",{className:"page-button ".concat(m?"":"selected"),onClick:this.handleTogglePage,disabled:!m,children:"Other sheets"})]}),(0,d.jsx)("button",{className:"create-sheet-button",onClick:()=>this.handleTogglePopupModal(),children:"Create Spreadsheet"})]}),p&&(0,d.jsx)(r,{handleCreateSpreadsheet:t,handleTogglePopupModal:this.handleTogglePopupModal,spreadsheetList:x}),m?(0,d.jsx)(c,{controller:e,handleChooseSpreadsheet:s,handleDeleteSpreadsheet:a,handleTogglePRPopup:this.handleTogglePRPopup,loading:n,pRDropdownsOpen:g,spreadSheetList:x,user:o}):(0,d.jsx)(u,{controller:e,handleChooseSpreadsheet:s,handleDeleteSpreadsheet:a,handleTogglePRPopup:this.handleTogglePRPopup,loading:n,pRDropdownsOpen:g,spreadSheetList:N,user:o})]})]})}}const m=g}}]);
//# sourceMappingURL=723.50c4ae5f.chunk.js.map